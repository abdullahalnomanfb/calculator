<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <link rel="stylesheet" href="./style.css" />
    <script src="https://unpkg.com/react@16.3.1/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@16.3.1/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/react-router-dom@5.0.0/umd/react-router-dom.min.js"></script>
    <script src="https://unpkg.com/babel-standalone@6.26.0/babel.js"></script>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous"
    />
    <script src="https://unpkg.com/react@16/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@16/umd/react-dom.production.min.js"></script>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel" >
              // React app
              // import ConstructionRate from "./components/ConstructionRate";

      //Construction
      const { useState } = React;

      const ConstructionRate = () => {
        const [data, setData] = useState([
          {
            id:1,
            name: "Excavation in ordinary soil and concrete",
            percentage: 3,
            sqFit: 48000,
            sqHouse: 1500,
          },
          {id:2, name: "Foundation", percentage: 10, sqFit: 48000, sqHouse: 2500 },
          {
            id:3,
            name: "Construction upto plinth",
            percentage: 30,
            sqFit: 1600000,
            sqHouse: 2500,
          },
          {
            id:4,
            name: "Superstructure in brickwork",
            percentage: 10,
            sqFit: 48000,
            sqHouse: 12500,
          },
        ]);

        const [constructionValue, setConstructionValue] = useState({
          percentage: 1000,
          squireFit: 500,
          houseArea:8500
        });

        const total = constructionValue.percentage * constructionValue.squireFit;

        const handleChange = (e,product) => {

          const newData =data.map((item)=>{

              if(item.id===product.id){
                item.percentage =e.target.value
              }
              return item
          })

          setData(newData)
          console.log("newData",newData);
        };
        console.log(data);
        return (
          <div class="construction">
            <table class="table table-bordered text-white">
              <thead>
                <tr class="head">
                  <th scope="col">
                    S. <br />
                    No.
                  </th>
                  <th scope="col">Item of work</th>
                  <th scope="col">Percentage of total work</th>
                  <th scope="col">For a 1000 sq ft house</th>
                  <th scope="col">Enter Your House Area in Sq ft</th>
                </tr>
                <tr >
                  <th
                    scope="row"
                    style={{
                      background: "#bdad09d6",
                      color: "white",
                      textAlign: "center",
                    }}
                  ></th>
                  <td
                    style={{
                      background: "#bdad09d6",
                      color: "white",
                      textAlign: "center",
                    }}
                  >
                    Construction Rate per sq fit
                  </td>
                  <td
                    style={{ background: "red", color: "white", textAlign: "center" }}
                  >
                    <input
                      type="text"
                      name=""
                      id="one"
                      value={constructionValue.percentage.toLocaleString(navigator.language, { minimumFractionDigits: 0 })}
                      onChange={(e) =>
                        setConstructionValue({
                          ...constructionValue,
                          percentage: e.target.value,
                        })
                      }
                    />
                  </td>
                  <td
                    style={{
                      background: "#bdad09d6",
                      color: "white",
                      textAlign: "center",
                    }}
                  >
                    <input
                      type="text"
                      name=""
                      id="two"
                      value={constructionValue.squireFit.toLocaleString(navigator.language, { minimumFractionDigits: 0 })}
                      onChange={(e) =>
                        setConstructionValue({
                          ...constructionValue,
                          squireFit: e.target.value,
                        })
                      }
                    />
                  </td>
                  <td
                    style={{ background: "red", color: "white", textAlign: "center" }}
                  >
                    <input
                      type="text"
                      name=""
                      id="one"
                      value={constructionValue.houseArea.toLocaleString(navigator.language, { minimumFractionDigits: 0 })}
                      onChange={(e) =>
                        setConstructionValue({
                          ...constructionValue,
                          houseArea: e.target.value,
                        })
                      }
                    />
                  </td>
                </tr>
              </thead>

              <tbody>



                { data.map((item, index) => (
                  <tr>
                    <th scope="row" style={{ background: "#ff723aeb" }}>
                      {" "}
                      {index + 1}
                    </th>
                    <td style={{ background: "#0f8cea" }}>{item.name}</td>
                    {/* <td style={{ background: "#28c028" }}>{percentage}%</td> */}
                    <td style={{ background: "#28c028" }}>
                      <input type="text" id={index + 1} onChange={(e)=>handleChange(e,item)} value={item.percentage}  /> <button  className='main-button'>%</button>
                    </td>
                    <td style={{ background: "#5c25a3d9",textAlign:'center' }}>
                      {(total * item.percentage / 100).toLocaleString(navigator.language, { minimumFractionDigits: 0 })}
                    </td>
                    <td style={{ background: "#5c25a3d9" ,textAlign:'center'}}>{(item.sqHouse* constructionValue.houseArea).toLocaleString(navigator.language, { minimumFractionDigits: 0 })}</td>
                  </tr>
                ))}
                <tr style={{ background: "yellow", color: "black",textAlign:'center' }}>
                  <th scope="row"></th>
                  <td>Total</td>
                  <td>100%</td>
                  <td className="sqTotal">{Number(total).toLocaleString(navigator.language, { minimumFractionDigits: 0 })}</td>
                  <td>{Number(constructionValue.percentage * constructionValue.houseArea).toLocaleString(navigator.language, { minimumFractionDigits: 0 })}</td>
                </tr>
              </tbody>
            </table>
          </div>
        );
      };

      // APP
      const App = () => (
        <div className="container mt-4">
          <ConstructionRate />
        </div>
      );

      ReactDOM.render(<App />, document.querySelector("#root"));
    </script>
    <script
      src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js"
      integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js"
      integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
